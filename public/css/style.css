/* ============================================
   BLIND TEST MUSICAL â€” MINIMAL MODERNE (Style 3)
   ============================================ */

/* ---------- Design tokens ---------- */
:root{
  --bg: #F6F7FB;
  --surface: #FFFFFF;
  --surface-2: #F3F4F6;

  --text: #0F172A;          /* slate-900 */
  --text-2: #334155;        /* slate-700 */
  --muted: #64748B;         /* slate-500 */

  --border: #E5E7EB;        /* gray-200 */
  --shadow: 0 18px 60px rgba(15, 23, 42, 0.10);
  --shadow-sm: 0 10px 30px rgba(15, 23, 42, 0.08);

  --primary: #2C7A7B;       /* teal */
  --primary-2: #285E61;
  --secondary: #1D4ED8;     /* blue */
  --danger: #DC2626;
  --warning: #F59E0B;
  --success: #16A34A;

  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 22px;

  --s-1: 8px;
  --s-2: 12px;
  --s-3: 16px;
  --s-4: 20px;
  --s-5: 28px;
  --s-6: 36px;

  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: var(--font);
  color: var(--text);
  background:
    radial-gradient(1200px 700px at 20% 10%, rgba(29, 78, 216, 0.08), transparent 60%),
    radial-gradient(900px 600px at 90% 20%, rgba(44, 122, 123, 0.10), transparent 55%),
    radial-gradient(900px 600px at 50% 90%, rgba(245, 158, 11, 0.08), transparent 60%),
    var(--bg);
}

a{ color: inherit; }
.hidden{ display:none !important; }

#app{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: var(--s-6) var(--s-3);
}

/* ---------- Layout wrappers ---------- */
.lobby, .room, .game{
  width: min(1120px, 100%);
}

.room, .game{
  display:grid;
  grid-template-columns: 1fr 360px;
  gap: var(--s-4);
  align-items:start;
}

@media (max-width: 980px){
  .room, .game{
    grid-template-columns: 1fr;
  }
  .game-sidebar{
    position: static !important;
  }
}

/* ---------- Cards ---------- */
.card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.card.pad{ padding: var(--s-5); }
.card.pad-md{ padding: var(--s-4); }
.card.pad-sm{ padding: var(--s-3); }

/* ---------- Inputs ---------- */
.input-group{
  display:flex;
  flex-direction:column;
  gap: var(--s-1);
  margin-top: var(--s-3);
}

label{
  font-size: 0.9rem;
  color: var(--text-2);
}

.input, .select, .chat-input{
  width:100%;
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: var(--radius-md);
  padding: 12px 14px;
  font-size: 1rem;
  outline:none;
  transition: border-color .15s ease, box-shadow .15s ease, transform .15s ease;
}

.input:focus, .select:focus, .chat-input:focus{
  border-color: rgba(29, 78, 216, 0.55);
  box-shadow: 0 0 0 4px rgba(29, 78, 216, 0.10);
}

.input[disabled]{
  background: var(--surface-2);
  color: var(--muted);
}

.select{ appearance:none; }

/* ---------- Buttons ---------- */
.btn{
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  border-radius: var(--radius-md);
  padding: 10px 14px;
  font-weight: 650;
  cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
}

.btn:hover{
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.btn:active{ transform: translateY(0px); }
.btn[disabled]{ opacity: 0.55; cursor:not-allowed; transform:none; box-shadow:none; }

.btn-block{ width:100%; }
.btn-lg{ padding: 14px 16px; border-radius: var(--radius-lg); font-size:1.02rem; }

.btn-primary{
  background: linear-gradient(135deg, rgba(44,122,123,1), rgba(29,78,216,1));
  color: #fff;
  border-color: transparent;
}

.btn-secondary{
  background: var(--surface);
  border-color: var(--border);
  color: var(--text);
}

.btn-success{ background: rgba(22,163,74,0.12); border-color: rgba(22,163,74,0.28); color: #14532D; }
.btn-danger{ background: rgba(220,38,38,0.10); border-color: rgba(220,38,38,0.25); color: #7F1D1D; }

/* ---------- Lobby ---------- */
.lobby-card{
  padding: var(--s-6);
  text-align:center;
}

.lobby-header{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: var(--s-2);
}

.lobby-logo{
  display:flex;
  align-items:center;
  gap: var(--s-3);
  justify-content:center;
}

.lobby-title{
  margin:0;
  font-size: clamp(2rem, 3.2vw, 2.6rem);
  letter-spacing: -0.02em;
}

.lobby-subtitle{
  margin: 0;
  color: var(--muted);
  font-size: 1.02rem;
}

.lobby-actions{ margin-top: var(--s-5); display:flex; flex-direction:column; gap: var(--s-3); }

.lobby-divider{
  color: var(--muted);
  font-size: 0.92rem;
  display:flex;
  align-items:center;
  gap: var(--s-2);
  margin: var(--s-2) 0;
}
.lobby-divider::before, .lobby-divider::after{
  content:"";
  height:1px;
  flex:1;
  background: var(--border);
}

.join-form{
  display:grid;
  grid-template-columns: 1fr auto;
  gap: var(--s-2);
}

/* Vinyl (subtil) */
.vinyl-disc{
  width: 56px;
  height: 56px;
  border-radius: 999px;
  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.0) 0 18px, rgba(0,0,0,0.04) 18px 22px, rgba(0,0,0,0.02) 22px 100%),
    radial-gradient(circle at 50% 50%, #111827 0 100%);
  position: relative;
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.18);
}

.vinyl-label{
  position:absolute;
  inset: 18px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(44,122,123,1), rgba(29,78,216,1));
  box-shadow: inset 0 0 0 6px rgba(255,255,255,0.08);
}

/* ---------- Modal ---------- */
.modal-overlay{
  position:fixed;
  inset:0;
  background: rgba(15, 23, 42, 0.48);
  display:flex;
  align-items:center;
  justify-content:center;
  padding: var(--s-4);
  z-index: 50;
}

.modal{
  width: min(620px, 100%);
  background: var(--surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  padding: var(--s-5);
}

.modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom: var(--s-3);
}

.modal-title{ margin:0; font-size: 1.35rem; letter-spacing: -0.01em; }
.modal-close{
  border:none;
  background: transparent;
  font-size: 1.8rem;
  line-height: 1;
  cursor:pointer;
  color: var(--muted);
}

.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap: var(--s-2);
  margin-top: var(--s-4);
}

/* ---------- Room ---------- */
.room-main{ display:flex; flex-direction:column; gap: var(--s-4); }

.room-header{
  padding: var(--s-4);
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: var(--s-3);
}

.room-code{
  display:flex;
  align-items:center;
  gap: var(--s-2);
  flex-wrap:wrap;
}

.room-code-value{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 1.1rem;
  padding: 6px 10px;
  border-radius: 12px;
  border: 1px dashed var(--border);
  background: var(--surface-2);
}

.room-info{
  display:flex;
  gap: var(--s-2);
  flex-wrap:wrap;
  color: var(--muted);
  font-size: 0.95rem;
}

.players-section{
  padding: var(--s-5);
}
.players-section h2{
  margin: 0 0 var(--s-3);
  letter-spacing: -0.01em;
}

.players-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: var(--s-3);
}
@media (max-width: 760px){
  .players-grid{ grid-template-columns: 1fr; }
}

.player-card{
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--s-3);
  display:flex;
  gap: var(--s-3);
  align-items:center;
  background: #fff;
}

.player-card.is-host{
  border-color: rgba(29,78,216,0.35);
  box-shadow: 0 0 0 4px rgba(29,78,216,0.08);
}

.player-avatar{
  width: 42px;
  height: 42px;
  border-radius: 14px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-weight: 800;
  flex: 0 0 auto;
}

.player-name{
  font-weight: 750;
}
.player-status{
  font-size: 0.92rem;
  color: var(--muted);
  display:flex;
  align-items:center;
  gap: 8px;
  margin-top: 4px;
}
.status-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: var(--border);
}
.player-status.ready .status-dot{ background: var(--success); }
.player-status.waiting .status-dot{ background: var(--warning); }
.player-status.disconnected .status-dot{ background: var(--muted); }

.player-card.disconnected {
  opacity: 0.5;
  border-style: dashed;
}

.room-actions{
  display:flex;
  gap: var(--s-2);
  flex-wrap:wrap;
  justify-content:flex-end;
}

/* ---------- Game ---------- */
.game-main{ display:flex; flex-direction:column; gap: var(--s-4); }

.game-header{
  padding: var(--s-4);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: var(--s-3);
}

.round-info{ color: var(--muted); font-weight: 650; }

.timer{
  font-variant-numeric: tabular-nums;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface-2);
  font-weight: 800;
}
.timer.warning{ border-color: rgba(245,158,11,0.45); background: rgba(245,158,11,0.12); color: #7C2D12; }
.timer.danger{ border-color: rgba(220,38,38,0.45); background: rgba(220,38,38,0.10); color: #7F1D1D; }

.vinyl-player{
  display:flex;
  align-items:center;
  justify-content:center;
  padding: var(--s-5);
}

.vinyl-player .vinyl-disc{
  width: 220px;
  height: 220px;
}
.vinyl-player .vinyl-label{
  inset: 76px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-weight: 900;
}
.vinyl-disc.spinning{
  animation: spin 2.2s linear infinite;
}
@keyframes spin{ from{ transform: rotate(0deg);} to{ transform: rotate(360deg);} }

.answer-status{
  display:flex;
  gap: var(--s-2);
  justify-content:center;
  flex-wrap:wrap;
}
.status-badge{
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 999px;
  padding: 8px 12px;
  color: var(--text-2);
  font-weight: 700;
}
.status-badge.found{
  border-color: rgba(22,163,74,0.28);
  background: rgba(22,163,74,0.10);
  color: #14532D;
}

.answer-form{
  display:grid;
  grid-template-columns: 1fr auto;
  gap: var(--s-2);
  padding: 0 var(--s-5) var(--s-5);
}
@media (max-width: 560px){
  .answer-form{ grid-template-columns: 1fr; }
}

.round-result{
  text-align:center;
  padding: var(--s-5);
}
.round-result-album{
  width: 180px;
  height: 180px;
  object-fit: cover;
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
}
.round-result-title{
  margin-top: var(--s-3);
  font-size: 1.4rem;
  font-weight: 900;
  letter-spacing: -0.02em;
}
.round-result-artist{
  margin-top: 6px;
  color: var(--muted);
  font-weight: 650;
}

/* Sidebar (game + room) */
.game-sidebar{
  position: sticky;
  top: var(--s-4);
  display:flex;
  flex-direction:column;
  gap: var(--s-3);
}

/* Scoreboard */
.scoreboard{
  padding: var(--s-4);
}
.scoreboard h3{
  margin:0 0 var(--s-2);
  font-size: 1.05rem;
}
.score-list{
  list-style:none;
  padding:0;
  margin:0;
  display:flex;
  flex-direction:column;
  gap: 10px;
}
.score-item{
  display:grid;
  grid-template-columns: auto auto 1fr auto auto;
  align-items:center;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: var(--surface);
}
.score-item.me{
  border-color: rgba(44,122,123,0.35);
  box-shadow: 0 0 0 4px rgba(44,122,123,0.08);
}

.score-rank{
  width: 26px;
  height: 26px;
  border-radius: 10px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: var(--surface-2);
  border: 1px solid var(--border);
  font-weight: 900;
  color: var(--text-2);
  font-size: 0.9rem;
}

.score-rank.first{ background: rgba(245,158,11,0.18); border-color: rgba(245,158,11,0.35); }
.score-rank.second{ background: rgba(29,78,216,0.12); border-color: rgba(29,78,216,0.25); }
.score-rank.third{ background: rgba(44,122,123,0.14); border-color: rgba(44,122,123,0.30); }

.score-avatar{
  width: 28px;
  height: 28px;
  border-radius: 10px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-weight: 900;
  font-size: 0.85rem;
}
.score-name{ font-weight: 750; }
.score-points{
  font-variant-numeric: tabular-nums;
  font-weight: 900;
}
.score-streak{
  font-size: 0.85rem;
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(220,38,38,0.10);
  border: 1px solid rgba(220,38,38,0.20);
  color: #7F1D1D;
  font-weight: 800;
}

/* ---------- Chat ---------- */
.chat{
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background: var(--surface);
  overflow:hidden;
}
.chat-messages{
  max-height: 360px;
  overflow:auto;
  padding: var(--s-3);
  display:flex;
  flex-direction:column;
  gap: 10px;
  background: linear-gradient(180deg, #fff, #fafafa);
}
.chat-message{
  font-size: 0.95rem;
  color: var(--text-2);
  line-height: 1.35;
}
.chat-message-author{
  font-weight: 900;
  margin-right: 6px;
}
.chat-message.system{
  color: var(--muted);
  background: var(--surface-2);
  border: 1px solid var(--border);
  padding: 8px 10px;
  border-radius: var(--radius-md);
}
.chat-input-container{
  display:grid;
  grid-template-columns: 1fr auto;
  gap: var(--s-2);
  padding: var(--s-3);
  border-top: 1px solid var(--border);
  background: var(--surface);
}
.chat-send{
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 10px 12px;
  font-weight: 850;
  cursor:pointer;
  background: var(--surface-2);
}
.chat-send:hover{ box-shadow: var(--shadow-sm); }

/* ---------- Countdown ---------- */
.countdown-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(15, 23, 42, 0.50);
  z-index: 60;
}
.countdown-number{
  width: 160px;
  height: 160px;
  border-radius: 999px;
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 4rem;
  font-weight: 950;
  color: var(--text);
}

/* ---------- Toasts ---------- */
.toast-container{
  position: fixed;
  bottom: var(--s-4);
  left: 50%;
  transform: translateX(-50%);
  display:flex;
  flex-direction:column;
  gap: 10px;
  z-index: 80;
  pointer-events:none;
}

.toast{
  pointer-events:auto;
  background: rgba(255,255,255,0.92);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 10px 14px;
  box-shadow: var(--shadow-sm);
  color: var(--text);
  font-weight: 750;
  backdrop-filter: blur(10px);
}

.toast.success{ border-color: rgba(22,163,74,0.25); }
.toast.error{ border-color: rgba(220,38,38,0.25); }
.toast.info{ border-color: rgba(29,78,216,0.25); }

/* ---------- Small helpers ---------- */
hr{ border:none; border-top:1px solid var(--border); }

/* ---------- Results / Game Over ---------- */
.game-over{
  width: min(920px, 100%);
  margin: 0 auto;
}

.game-over-card{
  padding: var(--s-6);
  text-align:center;
}

.game-over-title{
  margin: 0 0 var(--s-4);
  letter-spacing: -0.02em;
  font-size: clamp(2rem, 3.2vw, 2.6rem);
}

.game-over-podium{
  display:flex;
  align-items:flex-end;
  justify-content:center;
  gap: var(--s-3);
  margin: var(--s-4) 0 var(--s-5);
  flex-wrap:wrap;
}

.podium-place{
  width: 210px;
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background: var(--surface);
  padding: var(--s-4);
  box-shadow: var(--shadow-sm);
  position: relative;
}

.podium-place.first{ transform: translateY(-10px); border-color: rgba(245,158,11,0.35); }
.podium-place.second{ transform: translateY(8px); border-color: rgba(29,78,216,0.25); }
.podium-place.third{ transform: translateY(14px); border-color: rgba(44,122,123,0.25); }

.podium-avatar{
  width: 64px;
  height: 64px;
  border-radius: 18px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-weight: 950;
  font-size: 1.35rem;
  margin: 0 auto var(--s-2);
}

.podium-name{ font-weight: 900; }
.podium-score{ color: var(--muted); font-weight: 750; margin-top: 6px; }

.podium-rank{
  position:absolute;
  top: -14px;
  left: 50%;
  transform: translateX(-50%);
  width: 34px;
  height: 34px;
  border-radius: 999px;
  background: var(--surface);
  border: 1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 950;
}

.game-over-actions{
  display:flex;
  justify-content:center;
  gap: var(--s-2);
  flex-wrap:wrap;
  margin-top: var(--s-4);
}

/* ---------- Utilities ---------- */
.text-muted{ color: var(--muted); }
.mb-md{ margin-bottom: var(--s-3); }

.audio-gate {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
  padding: 14px 18px;
  border: 2px solid rgba(245, 158, 11, 0.5);
  border-radius: var(--radius-md);
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.12), rgba(251, 191, 36, 0.08));
  box-shadow: 0 8px 20px rgba(245, 158, 11, 0.15);
  margin: var(--s-3) var(--s-5);
  animation: pulse-audio 2s ease-in-out infinite;
}

@keyframes pulse-audio {
  0%, 100% { box-shadow: 0 8px 20px rgba(245, 158, 11, 0.15); }
  50% { box-shadow: 0 8px 30px rgba(245, 158, 11, 0.3); }
}

.audio-gate .muted {
  color: var(--text-2);
  font-size: 0.9rem;
}

.audio-gate strong {
  color: #92400E;
}

/* ---------- Mobile Responsive (< 768px) ---------- */
@media (max-width: 768px) {
  .input, .select, .chat-input {
    padding: 14px 16px;
    font-size: 16px; /* Evite le zoom auto iOS */
  }

  .btn {
    padding: 12px 16px;
    min-height: 44px; /* Apple HIG recommande 44px min */
  }
}

/* ---------- Small Mobile (< 560px) ---------- */
@media (max-width: 560px) {
  .room-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .room-actions {
    width: 100%;
    justify-content: stretch;
  }

  .room-actions .btn {
    flex: 1;
  }

  .game-header {
    flex-wrap: wrap;
    gap: var(--s-2);
  }

  .game-over-podium {
    flex-direction: column;
    align-items: center;
  }

  .podium-place {
    transform: none !important;
    width: 100%;
    max-width: 280px;
  }
}

/* ---------- Extra Small Mobile (< 480px) ---------- */
@media (max-width: 480px) {
  #app {
    padding: var(--s-3) var(--s-2);
  }

  .vinyl-player .vinyl-disc {
    width: 160px;
    height: 160px;
  }
  .vinyl-player .vinyl-label {
    inset: 56px;
  }

  .lobby-card, .card.pad {
    padding: var(--s-4);
  }

  .lobby-title {
    font-size: 1.8rem;
  }

  .countdown-number {
    width: 120px;
    height: 120px;
    font-size: 3rem;
  }

  .chat-messages {
    max-height: 200px;
  }

  .btn-lg {
    padding: 12px 14px;
  }

  .modal {
    padding: var(--s-4);
    margin: var(--s-2);
  }

  .round-result-album {
    width: 140px;
    height: 140px;
  }

  .round-result-title {
    font-size: 1.2rem;
  }

  .score-item {
    grid-template-columns: auto auto 1fr auto;
    gap: 8px;
    padding: 8px 10px;
  }

  .score-streak {
    display: none;
  }

  .player-card {
    padding: var(--s-2);
    gap: var(--s-2);
  }

  .player-avatar {
    width: 36px;
    height: 36px;
    border-radius: 10px;
  }

  .game-over-title {
    font-size: 1.6rem;
  }

  .toast {
    max-width: calc(100vw - 32px);
    text-align: center;
  }
}